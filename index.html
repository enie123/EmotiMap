<!DOCTYPE html> 
<html>
<head>
    <title>Twitter Emotion Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src='https://cdn.firebase.com/js/client/1.0.15/firebase.js'></script>
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.css" />
    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.3/jquery.mobile-1.4.3.min.js"></script>
    
<script src="https://www.gstatic.com/firebasejs/3.4.0/firebase.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script>
  // Initialize Firebase
 var config = {
    apiKey: "AIzaSyCxZkuXU1RqMPbUjhOk9b6VIHGhQ3U1BBU",
    authDomain: " twitter-emotions.firebaseapp.com",
    databaseURL: "https://twitter-emotions.firebaseio.com",
    storageBucket: ""
  };
  firebase.initializeApp(config);

  firebase.auth().signOut().then(function() {
  // Sign-out successful.
}, function(error) {
  // An error happened.
});

  // Get a reference to the database service
  var database = firebase.database();


        // This creates the connection to the database
      var toDoDB = new Firebase('https://twitter-emotions.firebaseio.com/');
      var usersRef = toDoDB.child("users");
      // This tells your web browser to respond when
      // SOMEONE (i.e. maybe not even you) adds to the database
      toDoDB.on('value', showItems);

     
      function showItems(snapshot){
          //gets data in database as a list
          var data = snapshot.val();
          //loops over each identifier in database
          for (var identifier in data) {
              console.log("Name: ", identifier);
              for (var index in data[identifier]) {
                  console.log(data[identifier][index]["task"], " for ", data[identifier][index]["reps"], " reps");
              }
          }
      }        

  function addItem(){

          var tweetID = $("#tweetID").val();
          var coord = $("#coord").val();
          var created_at = $('#created_at').val();
          var tweetText = $('#tweetText').val();

          var wholetweet = {"coordinates": coord, "geotag": created_at, "text": tweetText};

          alert(tweetID);
          toDoDB.child(tweetID).push(wholetweet);
          location.reload();
      }
 
        
  function removeItem() {
          alert("Remove function got called!");
          var idToRemove = $("#oldid").val();
          toDoDB.child(idToRemove).remove();
      }

function parsetweets(){
  console.log('show tweets');
var json = 'tweets.json',
obj = JSON.parse(json);

console.log('done');

}

parsetweets();
        
    </script>
</head>

<body>
    <div data-role="page">

        <div data-role="header">
            <h1>Twitter Emotions Map</h1>
        </div><!-- end of header -->


<input type="text" data-clear-btn="true" id="tweetID" placeholder="ID"/>
<input type="text" data-clear-btn="true" id="coord" placeholder="coord"/>
<input type="text" data-clear-btn="true" id="created_at" placeholder="created_at"/>
<input type="text" data-clear-btn="true" id="tweetText" placeholder="tweetText"/>


<button onclick="addItem()">Click me</button>

<button onclick="parsetweets()">JSON</button>



    </div><!-- end of page -->
</body>
</html>

